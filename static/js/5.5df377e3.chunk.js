webpackJsonp([5],{119:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),i=n.n(s),u=n(2),c=n.n(u),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSubmit=n.handleSubmit.bind(n),n}return a(t,e),l(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n={username:this.refs.user.value,password:this.refs.pass.value};fetch("/mengsir",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"username="+n.username+"&password="+n.password}).then(function(e){if(200!==e.status)throw new Error("\u63d0\u4ea4\u5f02\u5e38");e.json().then(function(e){"login"===e.isLogin&&(sessionStorage.setItem("token",e.token),t.context.router.history.push("/backstage/postarticle"))})})}},{key:"componentWillMount",value:function(){var e=this;fetch("/mengsir",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","access-token":sessionStorage.token}}).then(function(t){if(200!==t.status)throw new Error("\u767b\u5f55\u8bf7\u6c42\u5931\u8d25");t.json().then(function(t){"logged"===t.isLogin&&e.context.router.history.push("/backstage/postarticle")})})}},{key:"render",value:function(){return i.a.createElement("div",{className:"login-flex"},i.a.createElement("div",{className:"login-box"},i.a.createElement("h3",{className:"title"},"\u6930\u5b50\u732a\u7684\u90a3\u70b9\u4e8b"),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("div",{className:"username"},i.a.createElement("input",{type:"text",name:"username",placeholder:"\u7528\u6237\u540d",ref:"user"})),i.a.createElement("div",{className:"password"},i.a.createElement("input",{type:"password",name:"password",placeholder:"\u5bc6\u7801",ref:"pass"})),i.a.createElement("button",{type:"submit",className:"submit"},"\u767b\u5f55"))))}}]),t}(i.a.Component);p.contextTypes={router:c.a.object.isRequired},t.default=p}});
//# sourceMappingURL=5.5df377e3.chunk.js.map