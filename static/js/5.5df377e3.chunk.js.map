{"version":3,"sources":["../static/js/5.5df377e3.chunk.js","login/index.js"],"names":["webpackJsonp","119","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","n","__WEBPACK_IMPORTED_MODULE_1_prop_types__","__WEBPACK_IMPORTED_MODULE_1_prop_types___default","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","Login","_React$Component","this","_this","getPrototypeOf","handleSubmit","bind","e","_this2","preventDefault","data","username","refs","user","password","pass","fetch","method","headers","Content-Type","body","then","res","status","Error","json","resJson","isLogin","sessionStorage","setItem","token","context","router","history","push","_this3","access-token","a","createElement","className","onSubmit","type","name","placeholder","ref","Component","contextTypes","object","isRequired"],"mappings":"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","file":"static/js/5.5df377e3.chunk.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 119:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_prop_types__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}//异步请求后，路由跳转\nvar Login=function(_React$Component){_inherits(Login,_React$Component);function Login(props){_classCallCheck(this,Login);var _this=_possibleConstructorReturn(this,(Login.__proto__||Object.getPrototypeOf(Login)).call(this,props));_this.handleSubmit=_this.handleSubmit.bind(_this);return _this;}//设置\n_createClass(Login,[{key:'handleSubmit',value:function handleSubmit(e){var _this2=this;e.preventDefault();//获取用户名和密码\nvar data={username:this.refs.user.value,password:this.refs.pass.value};fetch('/mengsir',{method:'POST',//设置数据传输形式\nheaders:{'Content-Type':'application/x-www-form-urlencoded'},//数据体\nbody:'username='+data.username+'&password='+data.password}).then(function(res){if(res.status!==200){throw new Error('提交异常');}res.json().then(function(resJson){//登录成功跳转后台管理页面\nif(resJson.isLogin==='login'){sessionStorage.setItem('token',resJson.token);_this2.context.router.history.push('/backstage/postarticle');}});});}},{key:'componentWillMount',value:function componentWillMount(){var _this3=this;//检测是否为已登录状态\nfetch('/mengsir',{method:'POST',//设置数据传输形式\nheaders:{'Content-Type':'application/x-www-form-urlencoded','access-token':sessionStorage.token}}).then(function(res){if(res.status!==200){throw new Error('登录请求失败');}res.json().then(function(resJson){if(resJson.isLogin==='logged'){_this3.context.router.history.push('/backstage/postarticle');}});});}},{key:'render',value:function render(){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'login-flex'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'login-box'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('h3',{className:'title'},'\\u6930\\u5B50\\u732A\\u7684\\u90A3\\u70B9\\u4E8B'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('form',{onSubmit:this.handleSubmit},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'username'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('input',{type:'text',name:'username',placeholder:'\\u7528\\u6237\\u540D',ref:'user'})),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'password'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('input',{type:'password',name:'password',placeholder:'\\u5BC6\\u7801',ref:'pass'})),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('button',{type:'submit',className:'submit'},'\\u767B\\u5F55'))));}}]);return Login;}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component);Login.contextTypes={router:__WEBPACK_IMPORTED_MODULE_1_prop_types___default.a.object.isRequired};/* harmony default export */ __webpack_exports__[\"default\"] = (Login);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/5.5df377e3.chunk.js","import React from 'react';\n//异步请求后，路由跳转\nimport PropTypes from 'prop-types';\n\nclass Login extends React.Component {\n    constructor(props){\n        super(props);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n    //设置\n    static contextTypes = {\n        router: PropTypes.object.isRequired\n    }\n    handleSubmit(e){\n        e.preventDefault();\n        //获取用户名和密码\n        let data = {\n            username: this.refs.user.value,\n            password: this.refs.pass.value\n        }\n        fetch('/mengsir',{\n            method: 'POST',\n            //设置数据传输形式\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            //数据体\n            body: `username=${data.username}&password=${data.password}`\n        }).then(res => {\n            if(res.status !== 200){\n                throw new Error('提交异常');\n            }\n            res.json().then(resJson => {\n                //登录成功跳转后台管理页面\n                if(resJson.isLogin === 'login'){\n                    sessionStorage.setItem('token', resJson.token);\n                    this.context.router.history.push('/backstage/postarticle');\n                }\n            })\n        })\n    }\n    componentWillMount(){\n        //检测是否为已登录状态\n        fetch('/mengsir',{\n            method: 'POST',\n            //设置数据传输形式\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n                'access-token': sessionStorage.token\n            }\n        }).then(res => {\n            if(res.status !== 200){\n                throw new Error('登录请求失败')\n            }\n            res.json().then(resJson => {\n                if(resJson.isLogin === 'logged'){\n                    this.context.router.history.push('/backstage/postarticle');\n                }\n            })\n        })\n    }\n    render(){\n            return (\n                <div className=\"login-flex\">\n                    <div className=\"login-box\">\n                        <h3 className=\"title\">椰子猪的那点事</h3>\n                        <form onSubmit={this.handleSubmit}>\n                            <div className=\"username\">\n                                <input type=\"text\" name=\"username\" placeholder=\"用户名\" ref=\"user\"/>\n                            </div>\n                            <div className=\"password\">\n                                <input type=\"password\" name=\"password\" placeholder=\"密码\" ref=\"pass\"/>\n                            </div>\n                            <button type=\"submit\" className=\"submit\">登录</button>\n                        </form>\n                    </div>\n                </div>\n            )\n    }\n}\n\nexport default Login;\n\n\n// WEBPACK FOOTER //\n// ./src/login/index.js"],"sourceRoot":""}